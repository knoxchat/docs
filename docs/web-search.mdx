---
sidebar_position: 8
---

# Web Search  

Knox Chat provides built-in web search capabilities through two approaches: using models with native web search support, or appending the `:online` variant suffix to any supported model.

## Using Web Search

### Web Search Mode (UI)

In the Knox Chat UI, click the **Web Search** button in the chat input area to toggle web search mode. This automatically switches to the [Perplexity Sonar Pro](https://docs.perplexity.ai/guides/getting-started) model (`perplexity/sonar-pro`), which provides real-time web search results with source citations.

### `:online` Model Variant (API)

You can append the `:online` suffix to any supported model to use its web-search-enabled variant:

```json
{
  "model": "openai/gpt-5.2:online"
}
```

The `:online` suffix is one of several model variant suffixes supported by Knox Chat (alongside `:free`, `:beta`, `:extended`, `:thinking`, `:nitro`, and `:floor`). These variants are resolved by Knox Chat's intelligent model routing system, which selects the best available provider channel for the requested model.

### Direct Perplexity Model (API)

You can also use the Perplexity search model directly:

```json
{
  "model": "perplexity/sonar-pro"
}
```

This is the same model used by the UI's web search toggle and supports up to 65,536 max output tokens.

## Model Routing for Web Search

Knox Chat uses a multi-provider routing system with circuit breaker support. When you request a web-search-enabled model:

1. **Provider Model Routing** — The system checks `provider_models` for available providers offering the requested model
2. **Circuit Breaker Checks** — Providers with open circuits (due to recent failures) are automatically skipped
3. **Fallback Chain** — If the primary provider is unavailable, fallback providers are tried in order
4. **Legacy Channel Routing** — For models not in the provider system, standard channel-based routing is used

Routing strategies include `performance`, `cost`, `balanced`, and `round_robin`, configurable per model and per user.

## Parsing Web Search Results

Web search results are available via the API and standardized by Knox Chat to follow the [OpenAI Chat Completion Message type](https://platform.openai.com/docs/api-reference/chat/object) annotation pattern:

```json
{
  "message": {
    "role": "assistant",
    "content": "Here's the latest news I found: ...",
    "annotations": [
      {
        "type": "url_citation",
        "url_citation": {
          "url": "https://www.example.com/web-search-result",
          "title": "Title of the web search result",
          "content": "Content of the web search result",
          "start_index": 100,
          "end_index": 200
        }
      }
    ]
  }
}
```

This annotation format is consistent across all models that support web search, including native search models like Perplexity and models using the `:online` variant.

## Pricing

Web search requests are billed using your Knox Chat balance based on the underlying model's token pricing. The `web_search` cost component (if applicable for the model) is included in the model's pricing information, which is synced from provider data. Check the model details in the Knox Chat dashboard for specific pricing.
